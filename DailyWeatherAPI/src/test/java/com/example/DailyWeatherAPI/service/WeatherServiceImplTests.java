package com.example.DailyWeatherAPI.service;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotEquals;
import static org.mockito.Mockito.when;

import java.util.ArrayList;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.MockitoAnnotations;
import org.mockito.junit.jupiter.MockitoExtension;
import org.springframework.web.client.RestTemplate;

import com.example.DailyWeatherAPI.model.DailyForecast;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

@ExtendWith(MockitoExtension.class)
public class WeatherServiceImplTests {
	
	@Mock
	RestTemplate restTemplate;
	
	@Mock
	ObjectMapper objectMapper;
	
	@InjectMocks
	WeatherServiceImpl weatherServiceImpl;
	
    private double latitude=33.0;
	
	private double longitude=70.0;
	
	@BeforeEach
    public void setup() {
        MockitoAnnotations.openMocks(this);
    }
	
	@Test
	public void getDailyForecastWithNullResponse() throws JsonMappingException, JsonProcessingException {
		
		String weatherApiUrl = String.format("https://api.weather.gov/gridpoints/MLB/%s,%s/forecast", latitude, longitude);
		
		JsonNode mockJsonNode = new ObjectMapper().readTree("{\"@context\":[\"https://geojson.org/geojson-ld/geojson-context.jsonld\",{\"@version\":\"1.1\",\"wx\":\"https://api.weather.gov/ontology#\",\"geo\":\"http://www.opengis.net/ont/geosparql#\",\"unit\":\"http://codes.wmo.int/common/unit/\",\"@vocab\":\"https://api.weather.gov/ontology#\"}],\"type\":\"Feature\",\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-81.206753,28.57496],[-81.2093888,28.5522823],[-81.1835789,28.549966],[-81.1809382,28.572643300000003],[-81.206753,28.57496]]]},\"properties\":{\"units\":\"us\",\"forecastGenerator\":\"BaselineForecastGenerator\",\"generatedAt\":\"2024-07-21T11:36:38+00:00\",\"updateTime\":\"2024-07-21T07:56:09+00:00\",\"validTimes\":\"2024-07-21T01:00:00+00:00/P7DT3H\",\"elevation\":{\"unitCode\":\"wmoUnit:m\",\"value\":21.9456},\"periods\":[{\"number\":1,\"name\":\"Today\",\"startTime\":\"2024-07-20T06:00:00-04:00\",\"endTime\":\"2024-07-21T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":96,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":40},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/hot/tsra_hi,40?size=medium\",\"shortForecast\":\"Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Sunny. High near 96, with temperatures falling to around 91 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 40%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":2,\"name\":\"Tonight\",\"startTime\":\"2024-07-21T18:00:00-04:00\",\"endTime\":\"2024-07-22T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":30},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,30/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 0 to 10 mph. Chance of precipitation is 30%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":3,\"name\":\"Monday\",\"startTime\":\"2024-07-22T06:00:00-04:00\",\"endTime\":\"2024-07-22T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,60?size=medium\",\"shortForecast\":\"Mostly Sunny then Showers And Thunderstorms Likely\",\"detailedForecast\":\"Showers and thunderstorms likely after 2pm. Mostly sunny. High near 94, with temperatures falling to around 89 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 60%. New rainfall amounts less than a tenth of an inch possible.\"},{\"number\":4,\"name\":\"Monday Night\",\"startTime\":\"2024-07-22T18:00:00-04:00\",\"endTime\":\"2024-07-23T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_sct,60/tsra_sct,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 60%.\"},{\"number\":5,\"name\":\"Tuesday\",\"startTime\":\"2024-07-23T06:00:00-04:00\",\"endTime\":\"2024-07-23T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SSE\",\"icon\":\"https://api.weather.gov/icons/land/day/tsra_hi,30/tsra_hi,70?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms between 8am and 2pm, then showers and thunderstorms likely. Partly sunny, with a high near 94. South southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":6,\"name\":\"Tuesday Night\",\"startTime\":\"2024-07-23T18:00:00-04:00\",\"endTime\":\"2024-07-24T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,70/tsra_hi,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":7,\"name\":\"Wednesday\",\"startTime\":\"2024-07-24T06:00:00-04:00\",\"endTime\":\"2024-07-24T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":8,\"name\":\"Wednesday Night\",\"startTime\":\"2024-07-24T18:00:00-04:00\",\"endTime\":\"2024-07-25T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":9,\"name\":\"Thursday\",\"startTime\":\"2024-07-25T06:00:00-04:00\",\"endTime\":\"2024-07-25T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":10,\"name\":\"Thursday Night\",\"startTime\":\"2024-07-25T18:00:00-04:00\",\"endTime\":\"2024-07-26T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":11,\"name\":\"Friday\",\"startTime\":\"2024-07-26T06:00:00-04:00\",\"endTime\":\"2024-07-26T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":12,\"name\":\"Friday Night\",\"startTime\":\"2024-07-26T18:00:00-04:00\",\"endTime\":\"2024-07-27T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":13,\"name\":\"Saturday\",\"startTime\":\"2024-07-27T06:00:00-04:00\",\"endTime\":\"2024-07-27T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":14,\"name\":\"Saturday Night\",\"startTime\":\"2024-07-27T18:00:00-04:00\",\"endTime\":\"2024-07-28T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"ESE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/bkn?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Mostly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Mostly cloudy, with a low around 76. East southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"}]}}");
		
		String mockResponse = "{\"@context\":[\"https://geojson.org/geojson-ld/geojson-context.jsonld\",{\"@version\":\"1.1\",\"wx\":\"https://api.weather.gov/ontology#\",\"geo\":\"http://www.opengis.net/ont/geosparql#\",\"unit\":\"http://codes.wmo.int/common/unit/\",\"@vocab\":\"https://api.weather.gov/ontology#\"}],\"type\":\"Feature\",\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-81.206753,28.57496],[-81.2093888,28.5522823],[-81.1835789,28.549966],[-81.1809382,28.5726433],[-81.206753,28.57496]]]},\"properties\":{\"units\":\"us\",\"forecastGenerator\":\"BaselineForecastGenerator\",\"generatedAt\":\"2024-07-21T10:13:50+00:00\",\"updateTime\":\"2024-07-21T07:56:09+00:00\",\"validTimes\":\"2024-07-21T01:00:00+00:00/P7DT3H\",\"elevation\":{\"unitCode\":\"wmoUnit:m\",\"value\":21.9456},\"periods\":[{\"number\":1,\"name\":\"Today\",\"startTime\":\"2024-07-20T06:00:00-04:00\",\"endTime\":\"2024-07-21T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":96,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":40},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/hot/tsra_hi,40?size=medium\",\"shortForecast\":\"Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Sunny. High near 96, with temperatures falling to around 91 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 40%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":2,\"name\":\"Tonight\",\"startTime\":\"2024-07-21T18:00:00-04:00\",\"endTime\":\"2024-07-22T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":30},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,30/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 0 to 10 mph. Chance of precipitation is 30%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":3,\"name\":\"Monday\",\"startTime\":\"2024-07-22T06:00:00-04:00\",\"endTime\":\"2024-07-22T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,60?size=medium\",\"shortForecast\":\"Mostly Sunny then Showers And Thunderstorms Likely\",\"detailedForecast\":\"Showers and thunderstorms likely after 2pm. Mostly sunny. High near 94, with temperatures falling to around 89 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 60%. New rainfall amounts less than a tenth of an inch possible.\"},{\"number\":4,\"name\":\"Monday Night\",\"startTime\":\"2024-07-22T18:00:00-04:00\",\"endTime\":\"2024-07-23T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_sct,60/tsra_sct,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 60%.\"},{\"number\":5,\"name\":\"Tuesday\",\"startTime\":\"2024-07-23T06:00:00-04:00\",\"endTime\":\"2024-07-23T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SSE\",\"icon\":\"https://api.weather.gov/icons/land/day/tsra_hi,30/tsra_hi,70?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms between 8am and 2pm, then showers and thunderstorms likely. Partly sunny, with a high near 94. South southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":6,\"name\":\"Tuesday Night\",\"startTime\":\"2024-07-23T18:00:00-04:00\",\"endTime\":\"2024-07-24T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,70/tsra_hi,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":7,\"name\":\"Wednesday\",\"startTime\":\"2024-07-24T06:00:00-04:00\",\"endTime\":\"2024-07-24T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":8,\"name\":\"Wednesday Night\",\"startTime\":\"2024-07-24T18:00:00-04:00\",\"endTime\":\"2024-07-25T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":9,\"name\":\"Thursday\",\"startTime\":\"2024-07-25T06:00:00-04:00\",\"endTime\":\"2024-07-25T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":10,\"name\":\"Thursday Night\",\"startTime\":\"2024-07-25T18:00:00-04:00\",\"endTime\":\"2024-07-26T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":11,\"name\":\"Friday\",\"startTime\":\"2024-07-26T06:00:00-04:00\",\"endTime\":\"2024-07-26T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":12,\"name\":\"Friday Night\",\"startTime\":\"2024-07-26T18:00:00-04:00\",\"endTime\":\"2024-07-27T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":13,\"name\":\"Saturday\",\"startTime\":\"2024-07-27T06:00:00-04:00\",\"endTime\":\"2024-07-27T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":14,\"name\":\"Saturday Night\",\"startTime\":\"2024-07-27T18:00:00-04:00\",\"endTime\":\"2024-07-28T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"ESE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/bkn?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Mostly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Mostly cloudy, with a low around 76. East southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"}]}}";
		when(restTemplate.getForObject(weatherApiUrl, String.class)).thenReturn(mockResponse );

		when(objectMapper.readTree(Mockito.anyString())).thenReturn(mockJsonNode );
		
		DailyForecast reponse = weatherServiceImpl.getDailyForecast(latitude, longitude);
		
		assertNotEquals(reponse.getDaily().get(0).getDayName(), null);
		
	}
	
	
	@Test
	public void getDailyForecastWithOutNullResponse() throws JsonMappingException, JsonProcessingException {
		
		String weatherApiUrl = String.format("https://api.weather.gov/gridpoints/MLB/%s,%s/forecast", latitude, longitude);
		
		JsonNode mockJsonNode = new ObjectMapper().readTree("{\"@context\":[\"https://geojson.org/geojson-ld/geojson-context.jsonld\",{\"@version\":\"1.1\",\"wx\":\"https://api.weather.gov/ontology#\",\"geo\":\"http://www.opengis.net/ont/geosparql#\",\"unit\":\"http://codes.wmo.int/common/unit/\",\"@vocab\":\"https://api.weather.gov/ontology#\"}],\"type\":\"Feature\",\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-81.206753,28.57496],[-81.2093888,28.5522823],[-81.1835789,28.549966],[-81.1809382,28.572643300000003],[-81.206753,28.57496]]]},\"properties\":{\"units\":\"us\",\"forecastGenerator\":\"BaselineForecastGenerator\",\"generatedAt\":\"2024-07-21T11:36:38+00:00\",\"updateTime\":\"2024-07-21T07:56:09+00:00\",\"validTimes\":\"2024-07-21T01:00:00+00:00/P7DT3H\",\"elevation\":{\"unitCode\":\"wmoUnit:m\",\"value\":21.9456},\"periods\":[{\"number\":1,\"name\":\"Today\",\"startTime\":\"2024-07-21T07:00:00-04:00\",\"endTime\":\"2024-07-21T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":96,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":40},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/hot/tsra_hi,40?size=medium\",\"shortForecast\":\"Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Sunny. High near 96, with temperatures falling to around 91 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 40%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":2,\"name\":\"Tonight\",\"startTime\":\"2024-07-21T18:00:00-04:00\",\"endTime\":\"2024-07-22T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":30},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,30/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 0 to 10 mph. Chance of precipitation is 30%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":3,\"name\":\"Monday\",\"startTime\":\"2024-07-22T06:00:00-04:00\",\"endTime\":\"2024-07-22T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,60?size=medium\",\"shortForecast\":\"Mostly Sunny then Showers And Thunderstorms Likely\",\"detailedForecast\":\"Showers and thunderstorms likely after 2pm. Mostly sunny. High near 94, with temperatures falling to around 89 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 60%. New rainfall amounts less than a tenth of an inch possible.\"},{\"number\":4,\"name\":\"Monday Night\",\"startTime\":\"2024-07-22T18:00:00-04:00\",\"endTime\":\"2024-07-23T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_sct,60/tsra_sct,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 60%.\"},{\"number\":5,\"name\":\"Tuesday\",\"startTime\":\"2024-07-23T06:00:00-04:00\",\"endTime\":\"2024-07-23T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SSE\",\"icon\":\"https://api.weather.gov/icons/land/day/tsra_hi,30/tsra_hi,70?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms between 8am and 2pm, then showers and thunderstorms likely. Partly sunny, with a high near 94. South southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":6,\"name\":\"Tuesday Night\",\"startTime\":\"2024-07-23T18:00:00-04:00\",\"endTime\":\"2024-07-24T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,70/tsra_hi,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":7,\"name\":\"Wednesday\",\"startTime\":\"2024-07-24T06:00:00-04:00\",\"endTime\":\"2024-07-24T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":8,\"name\":\"Wednesday Night\",\"startTime\":\"2024-07-24T18:00:00-04:00\",\"endTime\":\"2024-07-25T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":9,\"name\":\"Thursday\",\"startTime\":\"2024-07-25T06:00:00-04:00\",\"endTime\":\"2024-07-25T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":10,\"name\":\"Thursday Night\",\"startTime\":\"2024-07-25T18:00:00-04:00\",\"endTime\":\"2024-07-26T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":11,\"name\":\"Friday\",\"startTime\":\"2024-07-26T06:00:00-04:00\",\"endTime\":\"2024-07-26T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":12,\"name\":\"Friday Night\",\"startTime\":\"2024-07-26T18:00:00-04:00\",\"endTime\":\"2024-07-27T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":13,\"name\":\"Saturday\",\"startTime\":\"2024-07-27T06:00:00-04:00\",\"endTime\":\"2024-07-27T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":14,\"name\":\"Saturday Night\",\"startTime\":\"2024-07-27T18:00:00-04:00\",\"endTime\":\"2024-07-28T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"ESE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/bkn?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Mostly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Mostly cloudy, with a low around 76. East southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"}]}}");
		
		String mockResponse="{\"@context\":[\"https://geojson.org/geojson-ld/geojson-context.jsonld\",{\"@version\":\"1.1\",\"wx\":\"https://api.weather.gov/ontology#\",\"geo\":\"http://www.opengis.net/ont/geosparql#\",\"unit\":\"http://codes.wmo.int/common/unit/\",\"@vocab\":\"https://api.weather.gov/ontology#\"}],\"type\":\"Feature\",\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[-81.206753,28.57496],[-81.2093888,28.5522823],[-81.1835789,28.549966],[-81.1809382,28.5726433],[-81.206753,28.57496]]]},\"properties\":{\"units\":\"us\",\"forecastGenerator\":\"BaselineForecastGenerator\",\"generatedAt\":\"2024-07-21T10:13:50+00:00\",\"updateTime\":\"2024-07-21T07:56:09+00:00\",\"validTimes\":\"2024-07-21T01:00:00+00:00/P7DT3H\",\"elevation\":{\"unitCode\":\"wmoUnit:m\",\"value\":21.9456},\"periods\":[{\"number\":1,\"name\":\"Today\",\"startTime\":\"2024-07-21T06:00:00-04:00\",\"endTime\":\"2024-07-21T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":96,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":40},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/hot/tsra_hi,40?size=medium\",\"shortForecast\":\"Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Sunny. High near 96, with temperatures falling to around 91 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 40%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":2,\"name\":\"Tonight\",\"startTime\":\"2024-07-21T18:00:00-04:00\",\"endTime\":\"2024-07-22T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":30},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,30/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 0 to 10 mph. Chance of precipitation is 30%. New rainfall amounts between a tenth and quarter of an inch possible.\"},{\"number\":3,\"name\":\"Monday\",\"startTime\":\"2024-07-22T06:00:00-04:00\",\"endTime\":\"2024-07-22T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"0 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,60?size=medium\",\"shortForecast\":\"Mostly Sunny then Showers And Thunderstorms Likely\",\"detailedForecast\":\"Showers and thunderstorms likely after 2pm. Mostly sunny. High near 94, with temperatures falling to around 89 in the afternoon. Heat index values as high as 107. Southeast wind 0 to 10 mph. Chance of precipitation is 60%. New rainfall amounts less than a tenth of an inch possible.\"},{\"number\":4,\"name\":\"Monday Night\",\"startTime\":\"2024-07-22T18:00:00-04:00\",\"endTime\":\"2024-07-23T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":60},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_sct,60/tsra_sct,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 60%.\"},{\"number\":5,\"name\":\"Tuesday\",\"startTime\":\"2024-07-23T06:00:00-04:00\",\"endTime\":\"2024-07-23T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SSE\",\"icon\":\"https://api.weather.gov/icons/land/day/tsra_hi,30/tsra_hi,70?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms between 8am and 2pm, then showers and thunderstorms likely. Partly sunny, with a high near 94. South southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":6,\"name\":\"Tuesday Night\",\"startTime\":\"2024-07-23T18:00:00-04:00\",\"endTime\":\"2024-07-24T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":70},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,70/tsra_hi,20?size=medium\",\"shortForecast\":\"Showers And Thunderstorms Likely then Slight Chance Showers And Thunderstorms\",\"detailedForecast\":\"Showers and thunderstorms likely before 8pm, then a slight chance of showers and thunderstorms between 8pm and 2am. Mostly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 70%.\"},{\"number\":7,\"name\":\"Wednesday\",\"startTime\":\"2024-07-24T06:00:00-04:00\",\"endTime\":\"2024-07-24T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":8,\"name\":\"Wednesday Night\",\"startTime\":\"2024-07-24T18:00:00-04:00\",\"endTime\":\"2024-07-25T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":9,\"name\":\"Thursday\",\"startTime\":\"2024-07-25T06:00:00-04:00\",\"endTime\":\"2024-07-25T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":10,\"name\":\"Thursday Night\",\"startTime\":\"2024-07-25T18:00:00-04:00\",\"endTime\":\"2024-07-26T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":77,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 77. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":11,\"name\":\"Friday\",\"startTime\":\"2024-07-26T06:00:00-04:00\",\"endTime\":\"2024-07-26T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":12,\"name\":\"Friday Night\",\"startTime\":\"2024-07-26T18:00:00-04:00\",\"endTime\":\"2024-07-27T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/sct?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Partly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Partly cloudy, with a low around 76. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":13,\"name\":\"Saturday\",\"startTime\":\"2024-07-27T06:00:00-04:00\",\"endTime\":\"2024-07-27T18:00:00-04:00\",\"isDaytime\":true,\"temperature\":94,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"SE\",\"icon\":\"https://api.weather.gov/icons/land/day/sct/tsra_hi,50?size=medium\",\"shortForecast\":\"Mostly Sunny then Chance Showers And Thunderstorms\",\"detailedForecast\":\"A chance of showers and thunderstorms after 2pm. Mostly sunny, with a high near 94. Southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"},{\"number\":14,\"name\":\"Saturday Night\",\"startTime\":\"2024-07-27T18:00:00-04:00\",\"endTime\":\"2024-07-28T06:00:00-04:00\",\"isDaytime\":false,\"temperature\":76,\"temperatureUnit\":\"F\",\"temperatureTrend\":\"\",\"probabilityOfPrecipitation\":{\"unitCode\":\"wmoUnit:percent\",\"value\":50},\"windSpeed\":\"5 to 10 mph\",\"windDirection\":\"ESE\",\"icon\":\"https://api.weather.gov/icons/land/night/tsra_hi,50/bkn?size=medium\",\"shortForecast\":\"Chance Showers And Thunderstorms then Mostly Cloudy\",\"detailedForecast\":\"A chance of showers and thunderstorms before 8pm. Mostly cloudy, with a low around 76. East southeast wind 5 to 10 mph. Chance of precipitation is 50%.\"}]}}";
		
		when(restTemplate.getForObject(weatherApiUrl, String.class)).thenReturn(mockResponse);
		
		when(objectMapper.readTree(Mockito.anyString())).thenReturn(mockJsonNode);
		
		DailyForecast reponse = weatherServiceImpl.getDailyForecast(latitude, longitude);
		
		assertEquals(reponse.getDaily().get(0).getDayName(), "Sunday");
		
	}

}
